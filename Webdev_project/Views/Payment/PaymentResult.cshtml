@* @{
    ViewBag.Title = "Kết quả thanh toán";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var paymentMethod = ViewBag.PaymentMethod;//TempData["PaymentMethod"] as string ?? "COD";
    var totalAmount = ViewBag.TotalAmount;//TempData["TotalAmount"] != null ? Convert.ToDecimal(TempData["TotalAmount"]) : 0;
}

<style>
    .payment-result-container {
        max-width: 600px;
        margin: 60px auto;
        background: #fff;
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        text-align: center;
    }

        .payment-result-container h2 {
            color: #28a745;
            font-size: 28px;
            font-weight: 700;
        }

        .payment-result-container p {
            font-size: 18px;
            margin-top: 20px;
        }

    .payment-amount {
        color: #6f42c1;
        font-size: 22px;
        font-weight: 600;
    }

    .payment-buttons a {
        display: inline-block;
        margin: 15px 10px 0;
        padding: 12px 24px;
        font-size: 16px;
        border-radius: 8px;
        text-decoration: none;
    }

    .btn-main {
        background-color: #6f42c1;
        color: #fff;
    }

    .btn-outline {
        border: 2px solid #6f42c1;
        color: #6f42c1;
    }

        .btn-main:hover, .btn-outline:hover {
            opacity: 0.85;
        }

    .success-icon {
        width: 80px;
        margin-bottom: 20px;
    }
</style>

<div class="payment-result-container">
    <img src="https://cdn-icons-png.flaticon.com/512/845/845646.png" alt="Success" class="success-icon" />
    <h2>Đặt hàng thành công!</h2>
    <p>Đơn hàng sẽ được giao đến bạn trong khoảng 2 đến 3 ngày</p>
    <p>@paymentMethod
        @totalAmount</p>
    <div class="payment-buttons">
        <a href="@Url.Action("Index", "Home")" class="btn-main">Về trang chủ</a>
    </div>
</div>
 *@

@model Webdev_project.Models.Order
@{
    ViewData["Title"] = "Order Confirmation";
    var totalFormatted = string.Format("{0:N0}₫", Model.TotalAmount);
}

<div class="container mt-5">
    <h2 class="text-success">🎉 Đặt hàng thành công!</h2>
    <p>Mã đơn hàng: <strong>@Model.OrderID</strong></p>
    <p>Trạng thái: <strong>@Model.Status</strong></p>
    <p>Ngày đặt: <strong>@Model.CreatedAt.ToLocalTime().ToString("dd/MM/yyyy HH:mm")</strong></p>
    <hr />

    <h4>Thông tin nhận hàng</h4>
    <ul>
        <li><strong>Họ tên:</strong> @Model.ReceiveInfo.Name</li>
        <li><strong>Điện thoại:</strong> @Model.ReceiveInfo.Phone</li>
        <li><strong>Địa chỉ:</strong> @Model.ReceiveInfo.Address</li>
    </ul>

    <h4 class="mt-4">Chi tiết đơn hàng</h4>
    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th>Ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Số lượng</th>
                <th>Đơn giá</th>
                <th>Thành tiền</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Items)
            {
                var subtotal = item.Quantity * item.UnitPrice;
                <tr>
                    <td><img src="@item.Image" alt="product" width="80" /></td>
                    <td>@item.ProductName</td>
                    <td>@item.Quantity</td>
                    <td>@string.Format("{0:N0}₫", item.UnitPrice)</td>
                    <td>@string.Format("{0:N0}₫", subtotal)</td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <th colspan="4" class="text-end">Tổng cộng:</th>
                <th>@totalFormatted</th>
            </tr>
        </tfoot>
    </table>

    <div class="text-center mt-4">
        <a href="/" class="btn btn-primary">Về trang chủ</a>
        @* <a href="/Orders/History" class="btn btn-secondary">Xem lịch sử đơn hàng</a> *@
    </div>
</div>
